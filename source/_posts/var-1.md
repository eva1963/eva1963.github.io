---
title: 闭包
date: 2017-03-12 19:26:24
categories: JS
tags: js,闭包，前端
---

- 函数执行形成一个私有作用域，保护里面的私有变量不受外界干扰，这种保护机制称之为“闭包”


- 市面认为的：形成一个不销毁的私有作用域（栈内存）才是闭包
  // 闭包：柯理化函数
  function fn(){
  return function(){}
   }
  // 闭包：惰性函数
  var utils = (function(){
  return {}
  })()

#### 闭包的作用：保护+保存
真实项目中为了保护JS的性能（堆栈内存的性能优化），应该尽可能的减少闭包的使用（不销毁的堆栈内存是耗性能的）
- **闭包具有保护作用，保护私有变量不受外界的干扰**
  - 在真实项目中，尤其是团队项目开发的时候应当尽可能的减少全局变量的使用，以防止项目之间的冲突（**“全局变量污染”**），那么此时我们完全可以把自己的这部分内容分装到一个比保重让全局变量转换为私有变量
```javascript
 (function(){
		var n =12;
		function fn(){};
 })()
```
- 不仅如此，我们分装插件的时候，也会把自己的程序都放到比保重保护起来，防止和用户的程序冲突，但是我们有需要暴露一些方法给用户使用，这样我们如何处理？
  - 1. JQ这种方式：把需要暴露的方法抛到全局

```javascript
(function(){
	function jQuery(){};
	window.jQuery = window.$ = jQuery;//把需要共外面使用的方法，通过给window添加属性的方式报漏出去
})()
//jQuery()
//$()
```

- zepto这种方式：基于return把需要供外面使用的方法报漏出去
```
var Zepto = (function(){
	//...
	return {
		xxx: function(){
		}
	}
})();
Zepto.xxx();
```
- **闭包具有保存作用，形成不销毁的栈内存，把一些值把存下来方便调取使用**

#### 基于ES6中的let来创建变量，是存在块级作用域的，类似于私有作用域；
作用域：
1. 全局作用域
2. 私有作用域（函数执行）
3. 块级作用域（一般用大括号包起来的都是块级作用域，前提是ES6的语法规范）






